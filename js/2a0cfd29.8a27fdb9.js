(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2a0cfd29"],{"071e":function(t,e,n){},"7ea7":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mypage"},[n("TitleBar",{attrs:{titleTx:t.$t("namesell")}}),n("div",{staticClass:"ns-up"},[n("span",{staticClass:"ns-myname"},[t._v(t._s(t.$t("myname")))]),n("span",{staticClass:"ns-myname",staticStyle:{"font-size":"20px"}},[t._v(t._s(""===t.global.ensname?t.$t("nonamecrt"):t.global.ensname))]),""===t.global.ensname?n("q-btn",{staticClass:"btn",staticStyle:{width:"100px","align-self":"center"},attrs:{flat:"",color:"primary",label:t.$t("gotoreg")},nativeOn:{click:function(e){return t.toRegisteENS(e)}}}):t._e(),""!==t.global.ensname?n("div",{staticClass:"tr-btn"},[n("q-btn",{staticClass:"btn",attrs:{flat:"",color:"primary",label:t.$t("nsell"),disable:!0===t.myNameInfo.isSelling},nativeOn:{click:function(e){return t.sellMyName(e)}}}),n("div",{staticClass:"porti-line"}),n("q-btn",{staticClass:"btn",attrs:{flat:"",color:"primary",label:t.$t("modifysellprice"),disable:!1===t.myNameInfo.isSelling},nativeOn:{click:function(e){return t.modifysellprice(e)}}}),n("div",{staticClass:"porti-line"}),n("q-btn",{staticClass:"btn",attrs:{flat:"",color:"primary",label:t.$t("cancelsell"),disable:!1===t.myNameInfo.isSelling},nativeOn:{click:function(e){return t.cancelsell(e)}}})],1):t._e()],1),n("div",{staticClass:"ns-down"},[n("div",{staticClass:"horial-line"}),n("span",{staticClass:"ns-sellist"},[t._v(t._s(t.$t("nselllist")))]),n("q-list",{staticClass:"ns-list",attrs:{highlight:"",separator:"","no-border":""}},t._l(t.nameSellList,function(e){return n("q-item",{key:e.index,staticClass:"item",attrs:{to:{path:"NameSellDetail",query:{item:e}}}},[n("span",[t._v(t._s(e.name))]),n("span",[t._v(t._s(e.price)+" eth")])])}))],1),n("MutiInputDialog",{attrs:{dialogData:t.mutiInputDialog},on:{mutiInputOk:t.mutiInputOk}})],1)},a=[];i._withStripped=!0;n("96cf");var s=n("c973"),l=n.n(s),o=(n("7f7f"),n("ac6a"),n("cadf"),n("9bfb")),r=n("f536"),c=n("e7ea"),u=(n("a002"),n("96a1"),n("3452"),{data:function(){return{mutiInputDialog:{show:!1,ok:this.$t("submit"),title:this.$t("namesell"),placeholder1:this.$t("inputsellprice"),show2:!0,placeholder2:this.$t("enterpswd"),type1:"number",from:"namesell"},myNameInfo:"",nameSellList:[]}},components:{TitleBar:o["a"],MutiInputDialog:r["a"]},mounted:function(){this.getMyNameStatusInfo(),this.getNameSellingEvent()},methods:{getNameSellingEvent:function(){var t=this,e={address:this.global.contractConfig.nabAddress,fromBlock:this.global.contractConfig.eventFromBlock,topics:["0x706fed9830ffac89c290ca81ae71b59339519e464f1ecc79f956a0bcf09db12d","0x000000000000000000000000"+this.global.wallet.ethAddress.substring(2)]},n=this.global.defaultProvider.getLogs(e);n.then(function(e){t.parseEvents(e)}).catch(function(t){console.error(t)})},parseEvents:function(t){},getNameStatus:function(t){var e=this,n=function(){var n=l()(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.global.nabContract.getNameSellingInfo(t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();n().then(function(t){t.isSelling})},getMyNameStatusInfo:function(){var t=this,e=function(){var e=l()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.global.nabContract.getNameSellingInfo(t.global.ensname);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();e().then(function(e){t.myNameInfo=e,console.log(!1===t.myNameInfo.isSelling)})},toRegisteENS:function(){this.$router.push({path:"/registeens",query:{p1:"namesell"}})},sellMyName:function(){this.myNameInfo.isSelling?toast(this.$t("nameselling")):(this.mutiInputDialog={show:!1,ok:this.$t("submit"),title:this.$t("namesell"),placeholder1:this.$t("inputsellprice"),show2:!0,placeholder2:this.$t("enterpswd"),type1:"number",from:"namesell"},this.mutiInputDialog.show=!0)},mutiInputOk:function(t){var e=this;this.$q.loading.show({message:this.$t("txsubmiting"),spinnerSize:50});var n=this.util.getWallet(e,t.v2);switch(t.v3){case"namesell":this.doSell(n,t.v1);break;case"modifysellprice":this.doModifyPrice(n,t.v1);break}},doSell:function(t,e){var n=this,i=this.global.nabContract.connect(t);i.sellName(this.global.ensname,c["ethers"].utils.parseEther(e+"")).then(function(t){console.log(t),n.$q.loading.hide(),n.util.showInfoDialog(n,n.$t("submitted"),t.hash,!1),n.util.listen4TxResult(n,t.hash,n.$t("submitsuccess"),n.$t("submitfailed"),function(){n.myNameInfo.isSelling=!0})}).catch(function(t){console.error(t),n.util.reprotError2Bmob(n,"doSell",t),n.$q.loading.hide()})},doModifyPrice:function(t,e){var n=this,i=this.global.nabContract.connect(t);i.changeSellPrice(this.global.ensname,c["ethers"].utils.parseEther(e+"")).then(function(t){console.log(t),n.$q.loading.hide(),n.util.showInfoDialog(n,n.$t("submitted"),t.hash,!1),n.util.listen4TxResult(n,t.hash,n.$t("modifySuccess"),n.$t("submitfailed"))}).catch(function(t){console.error(t),n.util.reprotError2Bmob(n,"changeSellPrice",t),n.$q.loading.hide()})},modifysellprice:function(){!1!==this.myNameInfo.isSelling?(this.mutiInputDialog={show:!1,ok:this.$t("submit"),title:this.$t("modifysellprice"),placeholder1:this.$t("inputsellprice"),show2:!0,placeholder2:this.$t("enterpswd"),type1:"number",from:"modifysellprice"},this.mutiInputDialog.show=!0):toast(this.$t("nonameselltip"))},cancelsell:function(){!1!==this.myNameInfo.isSelling?this.showPswdInputDialog():toast(this.$t("nonameselltip"))},showPswdInputDialog:function(){var t=this,e=this;this.$q.dialog({message:this.$t("enterpswd"),prompt:{model:"",type:"text"},cancel:!0,color:"secondary"}).then(function(n){if(""===n)toast(e.$t("pswdnull"));else{var i=t.util.getWallet(e,n);e.docancelsell(i)}})},docancelsell:function(t){var e=this,n=this.global.nabContract.connect(t);this.$q.loading.show({message:this.$t("txsubmiting"),spinnerSize:50}),n.cancelSelling(this.global.ensname).then(function(t){console.log(t),e.$q.loading.hide(),e.util.showInfoDialog(e,e.$t("submitted"),t.hash,!1),e.util.listen4TxResult(e,t.hash,e.$t("cancelSuccess"),e.$t("submitfailed"),function(){e.myNameInfo.isSelling=!1})}).catch(function(t){console.error(t),e.util.reprotError2Bmob(e,"cancelSelling",t),e.$q.loading.hide()})}}}),h=u,m=(n("cc01"),n("2877")),f=Object(m["a"])(h,i,a,!1,null,"41c6b2ec",null);f.options.__file="NameSell.vue";e["default"]=f.exports},8975:function(t,e,n){},"9bfb":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-bar"},[n("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(e){return t.goBack(e)}}}),n("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},a=[];i._withStripped=!0;var s={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},l=s,o=(n("a675"),n("2877")),r=Object(o["a"])(l,i,a,!1,null,null,null);r.options.__file="TitleBar.vue";e["a"]=r.exports},a675:function(t,e,n){"use strict";var i=n("ca51"),a=n.n(i);a.a},c394:function(t,e,n){"use strict";var i=n("071e"),a=n.n(i);a.a},ca51:function(t,e,n){},cc01:function(t,e,n){"use strict";var i=n("8975"),a=n.n(i);a.a},f536:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-dialog",{on:{show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"buttons",fn:function(e){return n("div",{staticClass:"dialog-btn"},[t._e(),n("q-btn",{staticStyle:{"margin-top":"0px"},attrs:{flat:"",label:t.dialogData.ok},on:{click:t.onOk}})],1)}}]),model:{value:t.dialogData.show,callback:function(e){t.$set(t.dialogData,"show",e)},expression:"dialogData.show"}},[n("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.title))]),n("div",{attrs:{slot:"body"},slot:"body"},[n("q-input",{attrs:{placeholder:t.dialogData.placeholder1,type:t.dialogData.type1},model:{value:t.text1,callback:function(e){t.text1=e},expression:"text1"}}),t.dialogData.show2?n("q-input",{attrs:{placeholder:t.dialogData.placeholder2},model:{value:t.text2,callback:function(e){t.text2=e},expression:"text2"}}):t._e()],1)])},a=[];i._withStripped=!0;n("7f7f"),n("96cf");var s=n("c973"),l=n.n(s),o={props:["dialogData"],data:function(){return{text1:"",text2:""}},methods:{onOk:function(){""!==this.text1&&(!0!==this.dialogData.show2||""!==this.text2)?("namesell"===this.dialogData.from||"modifysellprice"===this.dialogData.from)&&this.text1>50?toast(this.$t("namesellmax")):(this.$emit("mutiInputOk",{v1:this.text1,v2:this.text2,v3:this.dialogData.from}),this.dialogData.show=!1):toast(this.$t("nullinput"))},onCancel:function(){},onShow:function(){},onHide:function(){},choose:function(){var t=l()(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.name.length){t.next=4;break}this.$q.dialog({title:"Please specify your name!",message:"Can't buy tickets without knowing your name."}),t.next=7;break;case 4:return t.next=6,e();case 6:this.$q.notify("Ok ".concat(this.name,", going with ").concat(n));case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}},r=o,c=(n("c394"),n("2877")),u=Object(c["a"])(r,i,a,!1,null,"31f7d798",null);u.options.__file="MutiInputDialog.vue";e["a"]=u.exports}}]);